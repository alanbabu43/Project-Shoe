{% load static %}
<!DOCTYPE HTML>
<html>
	<head>
	<title>Footwear - Free Bootstrap 4 Template by Colorlib</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/3.0.8/jquery.elevatezoom.min.css" />
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/3.0.8/jquery.elevatezoom.min.js"></script>

	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Rokkitt:100,300,400,700" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

	
	<!-- Theme style  -->
	<link rel="stylesheet" href="{% static 'css\style.css' %}"> 
	<!-- Animate.css -->
	<link rel="stylesheet" href="{% static 'css/animate.css' %}">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="{% static 'css/icomoon.css' %}">
	<!-- Ion Icon Fonts-->
	<link rel="stylesheet" href="{% static 'css/ionicons.min.css' %}">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="{% static 'css/flexslider.css' %}">

	<!-- Owl Carousel -->
	<link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
	
	<!-- Date Picker -->
	<link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}">
	<!-- Flaticons  -->
	<link rel="stylesheet" href="{% static 'fonts/flaticon/font/flaticon.css' %}">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.20/dist/sweetalert2.min.css">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.20/dist/sweetalert2.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.min.css">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.zoom/1.7.21/jquery.zoom.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/jquery.zoom/1.7.21/jquery.zoom.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/3.0.8/jquery.elevatezoom.min.js"></script>


	</head>
	<style>
		.carousel-item img:hover {
  transform: scale(1.2);
  transition: transform 0.3s ease;
}		
		
		
	  </style>
	<body>
		
	<div class="colorlib-loader"></div>

	<div id="page">
		<nav class="colorlib-nav" role="navigation">
			<div class="top-menu">
				<div class="container">
					<div class="row">
						<div class="col-sm-7 col-md-9">
							<div id="colorlib-logo"><a href="{% url 'home' %}">Footwear</a></div>
						</div>
						<div class="col-sm-5 col-md-3">
							<form action="{% url 'search_brand' %}" method="post" class="search-wrap">
								{% csrf_token %}
							   <div class="form-group">
								  <input type="search" name="query" class="form-control search" placeholder="Search">
								  <button class="btn btn-primary submit-search text-center" type="submit"><i class="icon-search"></i></button>
							   </div>
							</form>
			         </div>
		         </div>
					<div class="row">
						<div class="col-sm-12 text-left menu-1">
							<ul>
								<li class="active"><a href="{% url 'home' %}">Home</a></li>
								<li><a href="{% url 'men' %}">Men</a>
									
								</li>
								<li><a href="{% url 'women' %}">Women</a></li>
								<li><a href="about.html">About</a></li>
								{% comment %} <li><a href="contact.html">Contact</a></li> {% endcomment %}
								{% if user.is_authenticated %}
								<li class="sig"><a href="{% url 'signout' %}">Sign Out</a></li>
								{% else %}
								<li class="sig"><a href="{% url 'signin' %}">Sign In</a></li>
								{% endif %}
								<li class="cart1 "><a href="{% url 'userprofile' %}"><i style="font-size:24px" class="fa">&#xf007;</i></a></li>
								<li class="cart1"><a href="{% url 'wishlist' %}"><i style="font-size:24px" class="fa">&#xf08a;</i></a></li>
								<li class="cart1"><a href="{% url 'cart' %}"><i class="icon-shopping-cart"></i> Cart</a></li>
								
							
							</ul>

						</div>
					</div>
				</div>
			</div>
			<div class="sale">
				<div class="container">
					<div class="row">
						<div class="col-sm-8 offset-sm-2 text-center">
							<div class="row">
								<div class="owl-carousel2">
									<div class="item">
										<div class="col">
											<!-- <h3><a href="#">25% off (Almost) Everything! Use Code: Summer Sale</a></h3> -->
										</div>
									</div>
									<div class="item">
										<div class="col">
											<!-- <h3><a href="#">Our biggest sale yet 50% off all summer shoes</a></h3> -->
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</nav>





		<section class="section-content padding-y bg">
			<div class="container">
			
			<!-- ============================ COMPONENT 1 ================================= -->
			<div class="card mt-3">
				<div class="row no-gutters">
					<aside class="col-md-6">
			<article class="gallery-wrap"> 
				<div id="zoom_01" class="carousel slide" data-ride="carousel">
					<div class="carousel-inner">
					  <div class="carousel-item active">
						<img class="d-block w-100" src="{{MEDIA_URL}}{{pro.image.url}}" alt="First slide">
					  </div>
					  {% for image in pro.product_image.all|slice:":3" %}
					  <div class="carousel-item">
						<img class="d-block w-100" src="/media/{{image.image}}" alt="Second slide">
					  </div>
					  {% endfor %}
					  <!-- <div class="carousel-item">
						<img class="d-block w-100" src="..." alt="Third slide">
					  </div> -->
					</div>
					<a class="carousel-control-prev" href="#zoom_01" role="button" data-slide="prev">
					  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
					  <span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#zoom_01" role="button" data-slide="next">
					  <span class="carousel-control-next-icon" aria-hidden="true"></span>
					  <span class="sr-only">Next</span>
					</a>
				  </div>

				  

			<!-- <div class="img-big-wrap">
			  <div><img id="zoom_01" data-zoom-image="/media/{{pro.product_image.first.image}}" src="/media/{{pro.product_image.first.image}}"></div>
			</div>  -->
			<!-- slider-product.// -->
			<!-- <div class="thumbs-wrap d-flex justify-content-evenly">
			  {% for image in pro.product_image.all|slice:":3" %}
			<img class="item-thumb" onclick="changeImage('/media/{{ image.image }}')" src="/media/{{image.image}}" width="70" data-color="{{ image.color }}">
			  
			  {% endfor %}
			</div> -->
			 <!-- slider-nav.// -->

			</article> <!-- gallery-wrap .end// -->

			<!-- <script>
				function changeImage(imageUrl) {
					// document.getElementById('zoom_01').src = imageUrl;
					$('#zoom_01').attr('src', imageUrl);
				}
			</script> -->
	
					</aside>
					<main class="col-md-6 border-left">
			<article class="content-body">
			
			<h2 class="title ps-3">{{pro.product_name}}</h2>
			<h2 class="title ps-3">{{pro.Brand}}</h2>
			<!-- <h2 class="title">{{pro.Category}}</h2> -->
			
			
			<div class="mb-3 ps-3"> 

				<span class="act-price" id="current_price">

					₹ {{pro.product_variant.first.price}}
					
				   </span>
				
			</div> <!-- price-detail-wrap .// -->
			
			<p class="ps-3">{{pro.discription}}</p>
			
			<hr>
				<div class="form-row ">
					<!-- <div class="form-group col-md flex-grow-0">
						<label>Quantity</label>
						<div class="input-group mb-3 input-spinner">
						  <div class="input-group-prepend">
							<button class="btn btn-light" type="button" id="button-plus"> + </button>
						  </div>
						  <input type="text" class="form-control" value="1">
						  <div class="input-group-append">
							<button class="btn btn-light" type="button" id="button-minus"> − </button>
						  </div>
						</div>
					</div>  -->
					


					<div class=" col-6 sizes mt-5 ps-3">
						<h6 class="text-uppercase">Size</h6> 
						{% for variation in pro.product_variant.all %}
						<label class="radio"> 
						  

						  <input type="radio" id="radio-btn" onclick="updatePrice('{{variation.price}}','{{variation.stock}}')" name="size" value="{{variation.size}}" data-size="{{ variation.size }}"> 
						  <span id="productsize">{{variation.size}}</span> 
						</label> 
						

						{% endfor %}
						<p class="" id="stock1"></p>
					   
					</div>
				</div>
					
				<!-- <div class="form-row">
					<div class="col-md-12">

					<div class=" col-6 sizes mt-3">
					<div class="col-4 input-group mb-3">
						<h6 class="text-uppercase">Quantity</h6> 
						<button class="quantity-up-btn btn btn-outline-secondary" type="button" onclick="incrementQuantity('{{pro.stock}}')">+</button>
						
						<input type="hidden" class="stock form-control" id="stock" value="{{pro.stock}}" aria-label="" aria-describedby="basic-addon1">

						<input type="number" class="quantity form-control" id="quantity" value="1" aria-label="" aria-describedby="basic-addon1">
						
						  
						<button class="quantity-up-btn btn btn-outline-secondary" type="button" onclick="decrementQuantity('{{pro.stock}}')">-</button>
						
					  </div>
					</div>
					</div>

				</div> -->
				



				<!-- <div class="form-row ">
				
				</div>  -->

	
					<input type="hidden" name="productid" id="productid"  value="{{pro.id}}">
					<input type="hidden" name="selectedsize" id="selectedsize"  value="">
					<input type="hidden" name="selectedprice" id="selectedprice"  value="">
					<!-- <input type="" name="selectedcolor" id="selectedcolor"  value=""> -->
					{{message}}

					<div class="ps-3 mb-3">
					<a href="{% url 'add_to_wishlist' pro.id %}" class="wishlist-icon" data-product-id="{{ pro.id }}">
						<i style="font-size:24px;color:red" class="fa">&#xf08a;</i>
					  </a>
					</div>

					<div class="ps-3" id="cartbutton" style="display: none;">
					<button id="addToCartButton" class="addToCartButton btn btn-danger text-uppercase mr-2 px-4 " data-id="{{pro.id}}">
					Add to cart
					</button>
					  
					</div>
					
						

					<!-- <script>
					var selectedSizeElement = document.querySelector('input[name="size"]:checked');
					var stock = selectedSizeElement.dataset.stock;
	
					</script>  -->

					
				  

				<!-- <a id="addToCartBtn" href="{% url 'cart' %}" class="btn  btn-outline-primary"> <span class="text">Add to cart</span> <i class="fas fa-shopping-cart"></i>  </a> -->
			</article> <!-- product-info-aside .// -->
					</main> <!-- col.// -->
				</div> <!-- row.// -->
			</div> <!-- card.// -->
			<!-- ============================ COMPONENT 1 END .// ================================= -->
			
		
			</div>
			</section>


		<div class="colorlib-partner">
			<div class="container">
				<div class="row">
					<div class="col-sm-8 offset-sm-2 text-center colorlib-heading colorlib-heading-sm">
						<h2>Trusted Partners</h2>
					</div>
				</div>
				<div class="row">
					<div class="col partner-col text-center">
						<img src="{% static 'images/brand-1.jpg' %}" class="img-fluid" alt="Free html4 bootstrap 4 template">
					</div>
					<div class="col partner-col text-center">
						<img src="{% static 'images/brand-2.jpg' %}" class="img-fluid" alt="Free html4 bootstrap 4 template">
					</div>
					<div class="col partner-col text-center">
						<img src="{% static 'images/brand-3.jpg' %}" class="img-fluid" alt="Free html4 bootstrap 4 template">
					</div>
					<div class="col partner-col text-center">
						<img src="{% static 'images/brand-4.jpg' %}" class="img-fluid" alt="Free html4 bootstrap 4 template">
					</div>
					<div class="col partner-col text-center">
						<img src="{% static 'images/brand-5.jpg' %}" class="img-fluid" alt="Free html4 bootstrap 4 template">
					</div>
				</div>
			</div>
		</div>

		<footer id="colorlib-footer" role="contentinfo">
			<div class="container">
				<div class="row row-pb-md">
					<div class="col footer-col colorlib-widget">
						<h4>About Footwear</h4>
						<p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life</p>
						<p>
							<ul class="colorlib-social-icons">
								<li><a href="#"><i class="icon-twitter"></i></a></li>
								<li><a href="#"><i class="icon-facebook"></i></a></li>
								<li><a href="#"><i class="icon-linkedin"></i></a></li>
								<li><a href="#"><i class="icon-dribbble"></i></a></li>
							</ul>
						</p>
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Customer Care</h4>
						<p>
							<ul class="colorlib-footer-links">
								<li><a href="#">Contact</a></li>
								<li><a href="#">Returns/Exchange</a></li>
								<li><a href="#">Gift Voucher</a></li>
								<li><a href="#">Wishlist</a></li>
								<li><a href="#">Special</a></li>
								<li><a href="#">Customer Services</a></li>
								<li><a href="#">Site maps</a></li>
							</ul>
						</p>
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Information</h4>
						<p>
							<ul class="colorlib-footer-links">
								<li><a href="#">About us</a></li>
								<li><a href="#">Delivery Information</a></li>
								<li><a href="#">Privacy Policy</a></li>
								<li><a href="#">Support</a></li>
								<li><a href="#">Order Tracking</a></li>
							</ul>
						</p>
					</div>

					<div class="col footer-col">
						<h4>News</h4>
						<ul class="colorlib-footer-links">
							<li><a href="blog.html">Blog</a></li>
							<li><a href="#">Press</a></li>
							<li><a href="#">Exhibitions</a></li>
						</ul>
					</div>

					<div class="col footer-col">
						<h4>Contact Information</h4>
						<ul class="colorlib-footer-links">
							<li>291 South 21th Street, <br> Suite 721 New York NY 10016</li>
							<li><a href="tel://1234567920">+ 1235 2355 98</a></li>
							<li><a href="mailto:info@yoursite.com">info@yoursite.com</a></li>
							<li><a href="#">yoursite.com</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="copy">
				<div class="row">
					<div class="col-sm-12 text-center">
						<p>
							<span><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></span> 
							<span class="block">Demo Images: <a href="http://unsplash.co/" target="_blank">Unsplash</a> , <a href="http://pexels.com/" target="_blank">Pexels.com</a></span>
						</p>
					</div>
				</div>
			</div>
		</footer>
	

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="ion-ios-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="{% static 'js/jquery.min.js' %}"></script>
   <!-- popper -->
   <script src="{% static 'js/popper.min.js' %}"></script>
   <!-- bootstrap 4.1 -->
   <script src="{% static 'js/bootstrap.min.js' %}"></script>
   <!-- jQuery easing -->
   <script src="{% static 'js/jquery.easing.1.3.js' %}"></script>
	<!-- Waypoints -->
	<script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
	<!-- Flexslider -->
	<script src="{% static 'js/jquery.flexslider-min.js' %}"></script>
	<!-- Owl carousel -->
	<script src="{% static 'js/owl.carousel.min.js' %}"></script>
	<!-- Magnific Popup -->
	<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
	<script src="{% static 'js/magnific-popup-options.js' %}"></script>
	<!-- Date Picker -->
	<script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
	<!-- Stellar Parallax -->
	<script src="{% static 'js/jquery.stellar.min.js' %}"></script>
	<!-- Main -->
	<script src="{% static 'js/main.js' %}"></script>

	<!-- image zoom -->
	<script src="{% static 'js/jquery.ez-plus.js' %}"></script>
<!-- <script type="text/javascript">
    $('#zoom_01').ezPlus();
</script> -->

	<script>			
		function updatePrice(price,stock1) {
			var priceElement = document.getElementById("current_price");
			priceElement.innerText = "₹ " + price;
			if (stock1<1){
				var stockElement = document.getElementById("stock1");
				stockElement.textContent = "Out of stock";
				var buttonElement = document.getElementById("cartbutton");
				buttonElement.style.display = "none";

			}
			else{
				var stockElement = document.getElementById("stock1");
				stockElement.textContent = "Stock Available";
				var buttonElement = document.getElementById("cartbutton");
				buttonElement.style.display = "block";
			}

			// Get the selected size
			var selectedSize = document.querySelector('input[name="size"]:checked');

			document.getElementById("selectedsize").value =selectedSize.dataset.size ;

			document.getElementById("selectedprice").value =price ;
			}

			// Function to increment the quantity
			function incrementQuantity(max) {
            var value = parseInt(document.getElementById('quantity').value, 10);
            value = isNaN(value) ? 0 : value;
            if( value < max){
               
               value++;

            }
            document.getElementById('quantity').value = value;
            var selectedquantityInput = document.getElementById("selectedquantity")
         selectedquantityInput.value = document.get('quantity').value
         console.log(selectedquantityInput.value)
       }

       
         // Function to decrement the quantity
         function decrementQuantity() {
            var value = parseInt(document.getElementById('quantity').value, 10);
            value = isNaN(value) ? 0 : value;
            if (value > 1){
               value--;
            }
            
            document.getElementById('quantity').value = value;
            var selectedquantityInput = document.getElementById("selectedquantity")
         selectedquantityInput.value = document.getElementById('quantity').value
         console.log(selectedquantityInput.value)
       }



			$(".addToCartButton").on('click', function() {
            console.log("add to cart button clicked")
			
			
            var productid = document.getElementById("productid").value;
			console.log(productid)

            // var selectedcolor = document.getElementById("selectedcolor").value;
            var selectedsize = document.getElementById("selectedsize").value;
			console.log(selectedsize)

            var selectedprice = document.getElementById("selectedprice").value;
			console.log(selectedprice)
            // var selectedquantity = document.getElementById("quantity").value;
			// console.log(selectedquantity)

            data = {"productid" : productid,"selectedsize":selectedsize,"selectedprice":selectedprice}

            $.ajax({
               url:"{% url 'add_to_cart' %}",
               method:"GET",
               data:data,

               success: function(data) {
                  console.log("code run success")
                  console.log(data.status)
                  console.log(data.message)
               }
            })

         })
		</script>

<script>
	$(document).ready(function() {
	  $('.wishlist-icon').click(function(event) {
		event.preventDefault();  // Prevent the default link behavior
	
		var productId = $(this).data('product-id');
		var url = $(this).attr('href');
	
		$.ajax({
		  url: url,
		  type: 'GET',
		  success: function(data) {
			if (data.created) {
			  // Wishlist item was added successfully
			  Swal.fire({
				icon: 'success',
				title: 'Product Added',
				text: 'Product added to wishlist.',
				confirmButtonColor: '#3085d6',
				confirmButtonText: 'OK'
			  });
			} else {
			  // Wishlist item already exists
			  Swal.fire({
				icon: 'info',
				title: 'Product Already Added',
				text: 'Product already in wishlist.',
				confirmButtonColor: '#3085d6',
				confirmButtonText: 'OK'
			  });
			}
		  },
		  error: function() {
			Swal.fire({
			  icon: 'error',
			  title: 'Error',
			  text: 'An error occurred while processing the request.',
			  confirmButtonColor: '#3085d6',
			  confirmButtonText: 'OK'
			});
		  }
		});
	  });
	});
	</script>

<script>
	$(document).ready(function() {
	$("#addToCartButton").click(function() {
		// Check if size is selected
		var selectedSize = $("#selectedsize").val(); // Assuming you have a select element with id "sizeSelect"
		
		if (!selectedSize) {
			// Show pop-up message to select the size
			Swal.fire({
				title: 'Select Size',
				text: 'Please select a size before adding to cart.',
				icon: 'warning',
				showCancelButton: false,
				showConfirmButton: true,
				confirmButtonText: 'OK',
				background: '#ffcc00',
				iconColor: '#ff0000',
			});
		} else {
			// Size is selected, show success message
			Swal.fire({
				title: 'Added to cart',
				icon: 'success',
				showCancelButton: false,
				showConfirmButton: false,
				timer: 1500,
				background: '#ffcc00',
				iconColor: '#ff0000',
				text: 'Continue shopping...',
			});
		}
	});
});
</script>

